generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  code         String   @unique
  name         String
  email        String   @unique
  phone        String
  role         String
  status       String
  department   String?
  joinDate     String
  points       Int      @default(0)
  rating       Float    @default(0)
  passwordHash String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Client {
  id            String    @id @default(cuid())
  code          String    @unique
  name          String
  email         String
  phone         String
  address       String
  type          String
  status        String
  totalServices Int       @default(0)
  lastService   String?
  createdAt     String
  projects      Project[]
}

model Project {
  id         String   @id @default(cuid())
  code       String   @unique
  name       String
  clientId   String
  clientName String
  status     String
  startDate  String
  endDate    String?
  osiCount   Int      @default(0)
  totalValue Float    @default(0)
  assignedTo String?
  notes      String?
  client     Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
  osis       Osi[]
}

model Osi {
  id            String  @id @default(cuid())
  code          String  @unique
  projectId     String
  projectCode   String
  clientId      String
  clientName    String
  status        String
  type          String
  origin        String
  destination   String
  scheduledDate String
  createdAt     String
  assignedTo    String?
  team          String[]
  vehicles      String[]
  value         Float
  notes         String?
  project       Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

